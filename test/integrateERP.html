<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>병원 ERP 시스템 - 문의사항</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- 메인 페이지 -->
  <main class="inquiry-main">
    <div class="inquiry-header">
      <h1 class="inquiry-title">커뮤니티</h1>
      <button class="btn-primary" id="createInquiryBtn">
        <span class="icon-plus">+</span>
        문의사항 등록
      </button>
    </div>

    <section class="inquiry-stats">
      <div class="stat-card">
        <div class="stat-icon stat-icon-notification">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M18 8A6 6 0 1 0 6 8c0 7-3 9-3 9h18s-3-2-3-9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-label">공지사항</span>
          <span class="stat-count">12건</span>
        </div>
        <span class="stat-badge">+3</span>
      </div>

      <div class="stat-card">
        <div class="stat-icon stat-icon-folder">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-9l-2-2H5a2 2 0 0 0-2 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-label">대기 중 문의</span>
          <span class="stat-count">8건</span>
        </div>
        <span class="stat-badge">+2</span>
      </div>

      <div class="stat-card">
        <div class="stat-icon stat-icon-check">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path d="m9 12 2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-label">처리 완료</span>
          <span class="stat-count">45건</span>
        </div>
        <span class="stat-badge">+12</span>
      </div>
      </div>
    </section>

    <nav class="inquiry-tabs">
      <button class="tab-btn">공지사항</button>
      <button class="tab-btn tab-btn-active">문의사항</button>
    </nav>

    <nav class="inquiry-filter-tabs">
      <button class="filter-tab filter-tab-active">전체</button>
      <button class="filter-tab">신청</button>
      <button class="filter-tab">반려</button>
    </nav>

    <section class="inquiry-list">
      <article class="inquiry-item" data-inquiry-id="1">
        <div class="inquiry-item-header">
          <div class="inquiry-badges">
            <span class="inquiry-badge inquiry-badge-status">대기중</span>
            <span class="inquiry-badge inquiry-badge-category">시설</span>
            <span class="inquiry-badge inquiry-badge-urgent">긴급</span>
          </div>
          <span class="inquiry-date">2025-10-28 09:30</span>
        </div>

        <div class="inquiry-user">
          <div class="user-avatar">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="8" fill="#e0e0e0"/>
              <circle cx="10" cy="8" r="3" fill="#757575"/>
              <path d="M4 16c0-3 2.5-5 6-5s6 2 6 5" fill="#757575"/>
            </svg>
          </div>
          <div class="user-info">
            <span class="user-name">이영희</span>
            <span class="user-id">안과/의사_#0002</span>
          </div>
        </div>

        <h3 class="inquiry-item-title">수술 예약승인 재발급 요청</h3>
        <p class="inquiry-description">10월 20일에 발급한 예약 건을 분실하여 수술승인을 재발급 요청합니다.</p>

        <button class="btn-view-inquiry">상세보기</button>
      </article>

      <article class="inquiry-item" data-inquiry-id="2">
        <div class="inquiry-item-header">
          <div class="inquiry-badges">
            <span class="inquiry-badge inquiry-badge-status-progress">진행중</span>
            <span class="inquiry-badge inquiry-badge-category">시설</span>
            <span class="inquiry-badge inquiry-badge-normal">일반</span>
          </div>
          <span class="inquiry-date">2025-10-27 14:22</span>
        </div>

        <div class="inquiry-user">
          <div class="user-avatar">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="8" fill="#e0e0e0"/>
              <circle cx="10" cy="8" r="3" fill="#757575"/>
              <path d="M4 16c0-3 2.5-5 6-5s6 2 6 5" fill="#757575"/>
            </svg>
          </div>
          <div class="user-info">
            <span class="user-name">김민준</span>
            <span class="user-id">내과/간호사_#0045</span>
          </div>
        </div>

        <h3 class="inquiry-item-title">MRI 장비 예약 문의</h3>
        <p class="inquiry-description">11월 첫째주 MRI 장비 예약 가능 일정을 확인하고 싶습니다.</p>

        <button class="btn-view-inquiry">상세보기</button>
      </article>
    </section>
  </main>

  <!-- 문의사항 상세보기 모달 -->
  <div class="modal-overlay" id="inquiryDetailModal">
    <div class="inquiry-detail-modal">
      <div class="modal-header">
        <div class="modal-title-section">
          <svg class="modal-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <rect x="3" y="4" width="14" height="12" rx="2" stroke="#00897b" stroke-width="2"/>
            <path d="M3 8h14M7 4v4M13 4v4" stroke="#00897b" stroke-width="2"/>
          </svg>
          <h2 class="modal-title">문의사항 상세</h2>
        </div>
        <button class="modal-close-btn" id="closeDetailModal">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M18 6 6 18M6 6l12 12" stroke="#757575" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="modal-content">
        <section class="inquiry-user-section">
          <div class="user-profile">
            <div class="user-avatar-large" id="modalUserAvatar">이</div>
            <div class="user-details">
              <h3 class="user-name-large" id="modalUserName">이영희</h3>
              <span class="user-department" id="modalUserDept">안과/의사_#0002</span>
            </div>
          </div>
          <div class="user-badges">
            <span class="badge badge-department">안과</span>
            <span class="badge badge-role">의사</span>
          </div>
        </section>

        <section class="inquiry-contact-section">
          <div class="contact-item">
            <span class="contact-label">연락처:</span>
            <span class="contact-value" id="modalPhone">010-2345-6789</span>
          </div>
          <div class="contact-item">
            <span class="contact-label">이메일:</span>
            <span class="contact-value" id="modalEmail">yhlee@email.com</span>
          </div>
        </section>

        <div class="inquiry-datetime">
          <span class="datetime-label">일시</span>
          <span class="datetime-value" id="modalDatetime">2025-10-27 14:20</span>
        </div>

        <div class="inquiry-title-section">
          <h3 class="inquiry-subject" id="modalSubject">수술 예약승인 재발급 요청</h3>
        </div>

        <div class="inquiry-content-section">
          <h4 class="content-label">문의 내용</h4>
          <div class="inquiry-content" id="modalContentText">
            <p>안녕하세요.</p>
            <p>지난 10월 20일에 발급한 예약 건을 분실하여 수술승인을 재발급 요청합니다.</p>
            <p>요청일: 2025년 10월 20일</p>
            <p>요청 사항: 수술 안전 재기 발급 예방승인 요청</p>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-secondary" id="cancelDetailModal">취소</button>
        <button class="btn-primary" id="answerInquiry">답변 등록</button>
      </div>
    </div>
  </div>

  <script>
    // 문의사항 데이터
    const inquiryData = {
      1: {
        userName: '이영희',
        userDept: '안과/의사_#0002',
        userAvatar: '이',
        phone: '010-2345-6789',
        email: 'yhlee@email.com',
        datetime: '2025-10-28 09:30',
        subject: '수술 예약승인 재발급 요청',
        content: `
          <p>안녕하세요.</p>
          <p>지난 10월 20일에 발급한 예약 건을 분실하여 수술승인을 재발급 요청합니다.</p>
          <p>요청일: 2025년 10월 20일</p>
          <p>요청 사항: 수술 안전 재기 발급 예방승인 요청</p>
        `
      },
      2: {
        userName: '김민준',
        userDept: '내과/간호사_#0045',
        userAvatar: '김',
        phone: '010-9876-5432',
        email: 'kmj@email.com',
        datetime: '2025-10-27 14:22',
        subject: 'MRI 장비 예약 문의',
        content: `
          <p>안녕하세요.</p>
          <p>11월 첫째주 MRI 장비 예약 가능 일정을 확인하고 싶습니다.</p>
          <p>환자명: 박순자</p>
          <p>희망 날짜: 2025년 11월 1일 ~ 11월 5일</p>
          <p>검사 종류: 뇌 MRI</p>
          <p>빠른 회신 부탁드립니다.</p>
        `
      }
    };

    // DOM 요소
    const detailModal = document.getElementById('inquiryDetailModal');
    const createInquiryBtn = document.getElementById('createInquiryBtn');
    const closeDetailModalBtn = document.getElementById('closeDetailModal');
    const cancelDetailModalBtn = document.getElementById('cancelDetailModal');
    const answerInquiryBtn = document.getElementById('answerInquiry');
    const inquiryItems = document.querySelectorAll('.inquiry-item');

    // 모달 열기/닫기 함수
    function openModal(modal) {
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeModal(modal) {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // 상세 모달 열기
    function openDetailModal(inquiryId) {
      const inquiry = inquiryData[inquiryId];
      
      if (!inquiry) return;
      
      // 모달 내용 업데이트
      document.getElementById('modalUserAvatar').textContent = inquiry.userAvatar;
      document.getElementById('modalUserName').textContent = inquiry.userName;
      document.getElementById('modalUserDept').textContent = inquiry.userDept;
      document.getElementById('modalPhone').textContent = inquiry.phone;
      document.getElementById('modalEmail').textContent = inquiry.email;
      document.getElementById('modalDatetime').textContent = inquiry.datetime;
      document.getElementById('modalSubject').textContent = inquiry.subject;
      document.getElementById('modalContentText').innerHTML = inquiry.content;
      
      openModal(detailModal);
    }

    // 문의사항 아이템 클릭 이벤트
    inquiryItems.forEach(item => {
      const viewBtn = item.querySelector('.btn-view-inquiry');
      viewBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        const inquiryId = item.getAttribute('data-inquiry-id');
        openDetailModal(inquiryId);
      });
    });

    // 문의사항 등록 버튼 클릭 (문의사항 작성 모달로 연결 - 추후 구현)
    createInquiryBtn.addEventListener('click', () => {
      alert('문의사항 등록 기능은 추후 구현 예정입니다.');
      // 실제로는 문의사항 작성 모달을 여는 코드가 들어갑니다
    });

    // 상세 모달 닫기 버튼
    closeDetailModalBtn.addEventListener('click', () => {
      closeModal(detailModal);
    });

    // 취소 버튼
    cancelDetailModalBtn.addEventListener('click', () => {
      closeModal(detailModal);
    });

    // 답변 등록 버튼
    answerInquiryBtn.addEventListener('click', () => {
      // 실제로는 답변 등록 폼이나 모달을 여는 코드가 들어갑니다
      alert('답변이 등록되었습니다.');
      closeModal(detailModal);
    });

    // 오버레이 클릭 시 닫기
    detailModal.addEventListener('click', (e) => {
      if (e.target === detailModal) {
        closeModal(detailModal);
      }
    });

    // ESC 키로 닫기
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (detailModal.classList.contains('active')) {
          closeModal(detailModal);
        }
      }
    });

    // 필터 탭 기능
    const filterTabs = document.querySelectorAll('.filter-tab');
    filterTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        filterTabs.forEach(t => t.classList.remove('filter-tab-active'));
        this.classList.add('filter-tab-active');
        
        // 실제로는 여기서 필터링 로직이 들어갑니다
        const filterType = this.textContent;
        console.log('필터 적용:', filterType);
      });
    });

    // 메인 탭 기능
    const tabBtns = document.querySelectorAll('.tab-btn');
    tabBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        tabBtns.forEach(b => b.classList.remove('tab-btn-active'));
        this.classList.add('tab-btn-active');
        
        // 실제로는 여기서 페이지 전환 로직이 들어갑니다
        const tabName = this.textContent;
        console.log('탭 전환:', tabName);
      });
    });
  </script>
</body>
</html>